.\" $Name $Revision: 1.1 $ $Date: 2005/01/11 03:38:10 $
.TH SRB_SYNCH_ORBREGISTRIES 1 2005/01/05 "VORB" "User Commands"
.SH NAME
SRB_synch_orbregistries \- synchronize/register ORB resources stored in database and ORB resources registered as SRB objects. 
.SH SYNOPSIS
.B SRB_synch_orbregistries
[\-hr] [-f config file] [\-t num_testcase] 
.SH DESCRIPTION
There are more than 10 thousand ORB data sources connecting to ROADNet. It is sensible to register them into SRB (Storage Resource Broker), thus they can be indexed, managed and accessed with easy from anywhere.  This utility reads in orb information from Datascope (Antelope) registry databases, which are pre-registered as SRB objects, and attempt to 
build/synchronize a collection of all ORB data sources stored across all databases. Each Orb source is registered as a SRB object, and can be queried though SRB. 
.PP
SRB_synch_orbregistries also insert metadata for each SRB-ORB. It is very useful if you want to query the ORBs based on this metadata.
.SH OPTIONS
.TP
\-f
File path of the config file, which stores SRB connection, storage path, and other required information. if this option is not chosen, this program will use the local file "config.sample" as config file.
.TP
\-h
Display a short help text
.TP
\-r
Rebuild the ORB collection. Please note that rebuilding, like first time building, could be very time consuming, due to the massive number of ORBs. This option is recommened only if you want a fresh start. 
.TP
\-t
Test mode. The argument is a integer. It exam up to this number of ORBs, per network. This option is highly recommened when you want to test this program.
.SH EXAMPLES
.TP
A normal synch process or first time build:
.B SRB_synch_orbregistries
.PP
.TP
Synch up to 8 ORBs per network:
.B SRB_synch_orbregistries
\-t 8
.PP
.TP
Synch up to 10 ORBs per network, with rebuild option:
.B SRB_synch_orbregistries
\-r -t 8
.PP
.SH EXIT STATUS
SRB_synch_orbregistries returns a zero exist status if it succeeds to synchronize. Non zero is returned in case of failure.
.SH SETUP
This section describes how to setup "SRB_synch_orbregistries". 

Note: This setup guide assumes you know the basics of SRB, especially Scommands, such as making a directory (Smkdir) and registering a SRB object (Sregister). For more information on SRB, please go to http://www.npaci.edu/DICE/SRB/

Step:

1. Make sure if you have:
       (a) A SRB server (ver. SRB3.1Roadnet), that 
           you have read and write permission.
           This is needed for Smkdir, and Sregister.
       (b) A SRB client pakage, which exists on the 
           same machine with this program, but not 
           necessarily the same machine with the server. 
       (c) Registry database(s) that store orb information. 

2. If does not exist, create a direcotry that will contain all registry databases, as SRB objects. For example, 'Smkdir "Datascope Registries"' will make the directory. Then find out the absolute path of this directory. and replace the value for SRB_COLLECTION_REGISTRIES in your config file.

3. If does not exist, registerd the registry databases as SRB objects under the directory you just created. For example, Sregister -p -R "mercali-datascope-1" -D "datascope data" "/home/rt/rtsystems/status/db/ven_orbregistry<DSPRESENTATION>db2html</DSPRESENTATION>?SHADOW" "ven_orbregistry"   

4. If does not exist, create a direcotry that will contain all registered ORBs as SRB objects. For example, 'Smkdir "Registered ORBs"' will make the directory. Then find out the absolute path of this directory. and replace the value for SRB_COLLECTION_REGISTERED_ORBS in your config file.

5. Make sure all parameters in your config file are appropriate. If not, follow the instructions in the "config.sample" file, and correct them. 

6. Make sure all pathes in Makefile are correct.

7. type "Make" to build the program.

.SH AUTHOR
Sifang Lu (sifang (at) sdsc.edu)
.SH SEE ALSO
Smkdir(1)
Sregister(1)
dbintro(1)
